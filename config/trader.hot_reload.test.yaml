# Multi-Strategy Configuration with Hot Reload Support
# 多策略配置 + 热加载支持

system:
  mode: "live"
  data_dir: "data/hot_reload_test"      # 热加载测试数据目录

strategies:
  # 策略1：白银配对套利
  - id: "ag_pairwise"
    type: "pairwise_arb"
    enabled: true
    symbols: ["ag2603", "ag2605"]
    exchanges: ["SHFE"]
    allocation: 0.4
    max_position_size: 16

    # Model热加载配置
    model_file: "./golang/models/model.ag_pairwise.txt"
    hot_reload:
      enabled: true
      mode: "manual"              # 手动触发模式

    parameters:
      spread_type: "difference"
      lookback_period: 100.0
      entry_zscore: 2.0           # 初始值，会被model文件覆盖
      exit_zscore: 0.5
      order_size: 4.0
      min_correlation: 0.7

  # 策略2：被动做市
  - id: "ag_passive"
    type: "passive"
    enabled: true
    symbols: ["ag2603"]
    exchanges: ["SHFE"]
    allocation: 0.3
    max_position_size: 10

    # Model热加载配置
    model_file: "./golang/models/model.ag_passive.txt"
    hot_reload:
      enabled: true
      mode: "manual"

    parameters:
      spread_multiplier: 0.5
      order_size: 2.0

  # 策略3：黄金配对套利
  - id: "au_pairwise"
    type: "pairwise_arb"
    enabled: true
    symbols: ["au2604", "au2606"]
    exchanges: ["SHFE"]
    allocation: 0.3
    max_position_size: 10

    # Model热加载配置
    model_file: "./golang/models/model.au_pairwise.txt"
    hot_reload:
      enabled: true
      mode: "manual"

    parameters:
      spread_type: "difference"
      lookback_period: 20.0
      entry_zscore: 1.0
      exit_zscore: 0.3
      order_size: 1.0
      min_correlation: 0.0

session:
  start_time: "00:00:00"
  end_time: "23:59:59"
  timezone: "Asia/Shanghai"
  auto_start: true
  auto_stop: false
  auto_activate: false

risk:
  max_drawdown: 10000.0
  stop_loss: 50000.0
  max_loss: 100000.0
  daily_loss_limit: 200000.0
  max_reject_count: 10
  check_interval_ms: 100

engine:
  ors_gateway_addr: "localhost:50052"
  nats_addr: "nats://localhost:4222"
  order_queue_size: 100
  timer_interval: 5s
  max_concurrent_orders: 10

portfolio:
  total_capital: 1000000.0
  rebalance_interval_sec: 3600
  min_allocation: 0.05
  max_allocation: 0.50
  enable_auto_rebalance: false
  enable_correlation_calc: false

api:
  enabled: true
  port: 9301
  host: "localhost"

logging:
  level: "info"
  file: "./log/trader.hot_reload.test.log"
  max_size_mb: 100
  max_backups: 10
  max_age_days: 30
  compress: true
  console: true
  json_format: false
