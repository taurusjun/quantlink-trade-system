# å®ç›˜äº¤æ˜“é—®é¢˜ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¥æœŸ**: 2026-01-30
**ä¿®å¤æ—¶é—´**: 10:50
**ç‰ˆæœ¬**: v1.0

---

## ä¸€ã€é—®é¢˜æ€»ç»“

æ ¹æ®å®ç›˜æµ‹è¯•åé¦ˆï¼Œå‘ç°ä»¥ä¸‹5ä¸ªå…³é”®é—®é¢˜ï¼š

1. âŒ **ç¼ºå°‘å®ç›˜ä¸“ç”¨é…ç½®** - æµ‹è¯•é…ç½®å‚æ•°è¿‡äºæ¿€è¿›
2. âŒ **è®¢å•å§”æ‰˜ä»·æ ¼åç¦»å¸‚ä»·** - ä½¿ç”¨mid priceå¯¼è‡´ä»·æ ¼åç¦»
3. âŒ **ä»·æ ¼tick sizeå¯¹é½é—®é¢˜** - "ä»·æ ¼éæœ€å°å•ä½çš„å€æ•°"å¯¼è‡´æ‹’å•
4. âŒ **æŒä»“æ˜¾ç¤ºé—®é¢˜** - æ˜¾ç¤ºç­–ç•¥ä¸¤æ¡è…¿è€ŒéçœŸå®æŒä»“
5. âŒ **å¯åŠ¨æ—¶æœªæŸ¥è¯¢æŒä»“** - ç³»ç»Ÿå¯åŠ¨æ—¶åº”è¯¥åŒæ­¥çœŸå®æŒä»“

---

## äºŒã€ä¿®å¤æ–¹æ¡ˆä¸å®ç°

### ğŸ“‹ ä¿®å¤1: åˆ›å»ºå®ç›˜ä¸“ç”¨é…ç½®æ–‡ä»¶

**é—®é¢˜æè¿°**:
- æµ‹è¯•é…ç½®ï¼ˆ`trader.test.yaml`ï¼‰å‚æ•°è¿‡äºæ¿€è¿›
  - `entry_zscore: 0.5` - å¤ªå®¹æ˜“è§¦å‘
  - `min_correlation: 0.0` - æ— ç›¸å…³æ€§è¦æ±‚
  - `risk.max_drawdown: 10000` - é£æ§é˜ˆå€¼å¤ªä½
  - äº¤æ˜“æ—¶æ®µ: 00:00-23:59 - å…¨å¤©è¿è¡Œ

**ä¿®å¤æ–¹æ¡ˆ**:
åˆ›å»º `config/trader.live.yaml` å®ç›˜ä¸“ç”¨é…ç½®

**å…³é”®å‚æ•°å¯¹æ¯”**:

| å‚æ•° | æµ‹è¯•é…ç½® | å®ç›˜é…ç½® | è¯´æ˜ |
|------|---------|---------|------|
| entry_zscore | 0.5 | 2.5 | æ›´ä¿å®ˆçš„å…¥åœºé˜ˆå€¼ |
| exit_zscore | 0.2 | 0.8 | æ›´é«˜çš„å‡ºåœºé˜ˆå€¼ |
| min_correlation | 0.0 | 0.7 | è¦æ±‚é«˜ç›¸å…³æ€§ |
| order_size | 1 | 2 | é€‚åº¦å¢åŠ è§„æ¨¡ |
| lookback_period | 100 | 200 | æ›´é•¿çš„ç»Ÿè®¡å‘¨æœŸ |
| max_drawdown | 10,000 | 50,000 | æé«˜é£æ§é˜ˆå€¼ |
| stop_loss | 50,000 | 80,000 | æé«˜æ­¢æŸé˜ˆå€¼ |
| max_loss | 100,000 | 150,000 | æé«˜æœ€å¤§äºæŸ |
| total_capital | 1,000,000 | 500,000 | å®é™…èµ„é‡‘è§„æ¨¡ |

**æ–°å¢é…ç½®**:
```yaml
# å“ç§è§„æ ¼é…ç½®
instruments:
  ag2603:
    tick_size: 1.0              # ç™½é“¶æœ€å°å˜åŠ¨ä»·ä½
    contract_multiplier: 15      # åˆçº¦ä¹˜æ•°
  au2604:
    tick_size: 0.02             # é»„é‡‘æœ€å°å˜åŠ¨ä»·ä½
    contract_multiplier: 1000    # åˆçº¦ä¹˜æ•°

# äº¤æ˜“æ—¶æ®µ
session:
  start_time: "08:55:00"        # æå‰5åˆ†é’Ÿå‡†å¤‡
  end_time: "15:05:00"          # å»¶å5åˆ†é’Ÿå¹³ä»“
  night_session:
    enabled: true
    start_time: "20:55:00"
    end_time: "02:35:00"

# ç­–ç•¥å‚æ•°
parameters:
  slippage_ticks: 2             # æ»‘ç‚¹(tickæ•°)
  use_market_price: false       # ä½¿ç”¨é™ä»·å•
```

**æ–‡ä»¶ä½ç½®**: `config/trader.live.yaml`

âœ… **çŠ¶æ€**: å·²å®Œæˆ

---

### ğŸ¯ ä¿®å¤2 & 3: ä¿®å¤è®¢å•ä»·æ ¼é—®é¢˜

#### é—®é¢˜2: å§”æ‰˜ä»·æ ¼åç¦»å¸‚ä»·

**é—®é¢˜æè¿°**:
```go
// æ—§ä»£ç ï¼ˆé—®é¢˜ä»£ç ï¼‰
Price: pas.price1,  // ä½¿ç”¨mid price
```

é—®é¢˜ï¼š
- ä½¿ç”¨mid price = (bid + ask) / 2
- ä¹°å•ï¼šmid priceå¯èƒ½è¿œä½äºaskï¼ˆå–ä¸€ä»·ï¼‰ï¼Œæ— æ³•æˆäº¤
- å–å•ï¼šmid priceå¯èƒ½è¿œé«˜äºbidï¼ˆä¹°ä¸€ä»·ï¼‰ï¼Œæ— æ³•æˆäº¤

**å®é™…æ¡ˆä¾‹**ï¼ˆç™½é“¶ag2603ï¼‰:
```
Bidï¼ˆä¹°ä¸€ï¼‰: 31106.00
Askï¼ˆå–ä¸€ï¼‰: 31142.00
Mid Price: 31124.00

ä¹°å•ä»·æ ¼: 31124.00 âŒ ä½äºaskï¼Œå–æ–¹ä¸æ„¿å–
å–å•ä»·æ ¼: 31124.00 âŒ é«˜äºbidï¼Œä¹°æ–¹ä¸æ„¿ä¹°
```

#### é—®é¢˜3: ä»·æ ¼tick sizeå¯¹é½

**é—®é¢˜æè¿°**:
äº¤æ˜“æ‰€æ‹’å•åŸå› ï¼š"ä»·æ ¼éæœ€å°å•ä½çš„å€æ•°"

- **ç™½é“¶ï¼ˆagï¼‰**: tick_size = 1.0å…ƒ/åƒå…‹
- **é»„é‡‘ï¼ˆauï¼‰**: tick_size = 0.02å…ƒ/å…‹

å¦‚æœä»·æ ¼æ˜¯ 31124.5 æˆ– 1191.835ï¼Œä¼šè¢«äº¤æ˜“æ‰€æ‹’ç»ã€‚

#### ç»Ÿä¸€ä¿®å¤æ–¹æ¡ˆ

åˆ›å»ºä»·æ ¼å·¥å…·æ¨¡å— `golang/pkg/strategy/price_utils.go`ï¼š

**1. å“ç§è§„æ ¼é…ç½®**:
```go
type InstrumentSpec struct {
    TickSize           float64  // æœ€å°å˜åŠ¨ä»·ä½
    ContractMultiplier int64    // åˆçº¦ä¹˜æ•°
    Exchange           string   // äº¤æ˜“æ‰€
}

var DefaultInstrumentSpecs = map[string]InstrumentSpec{
    "ag2603": {TickSize: 1.0, ContractMultiplier: 15, Exchange: "SHFE"},
    "ag2605": {TickSize: 1.0, ContractMultiplier: 15, Exchange: "SHFE"},
    "au2604": {TickSize: 0.02, ContractMultiplier: 1000, Exchange: "SHFE"},
    "au2606": {TickSize: 0.02, ContractMultiplier: 1000, Exchange: "SHFE"},
    // æ›´å¤šå“ç§...
}
```

**2. æ™ºèƒ½ä»·æ ¼è®¡ç®—å‡½æ•°**:
```go
func GetOrderPrice(
    side OrderSide,      // ä¹°/å–æ–¹å‘
    bid float64,         // ä¹°ä¸€ä»·
    ask float64,         // å–ä¸€ä»·
    symbol string,       // å“ç§ä»£ç 
    slippageTicks int,   // æ»‘ç‚¹(tickæ•°)
    aggressive bool      // æ˜¯å¦ä¸»åŠ¨æˆäº¤
) float64
```

**ä»·æ ¼è®¡ç®—é€»è¾‘**:

| è®¢å•æ–¹å‘ | æ¨¡å¼ | åŸºç¡€ä»·æ ¼ | æ»‘ç‚¹å¤„ç† | ç¤ºä¾‹ï¼ˆagï¼Œæ»‘ç‚¹2ï¼‰ |
|---------|------|---------|----------|------------------|
| ä¹°å• | ä¸»åŠ¨ | ask | +æ»‘ç‚¹ | 31142 + 2 = 31144 |
| ä¹°å• | æŒ‚å• | bid | +æ»‘ç‚¹ | 31106 + 2 = 31108 |
| å–å• | ä¸»åŠ¨ | bid | -æ»‘ç‚¹ | 31106 - 2 = 31104 |
| å–å• | æŒ‚å• | ask | -æ»‘ç‚¹ | 31142 - 2 = 31140 |

**3. Tick sizeå¯¹é½**:
```go
func RoundToTickSize(price float64, tickSize float64) float64 {
    return math.Round(price/tickSize) * tickSize
}

// ç¤ºä¾‹ï¼š
// ç™½é“¶: RoundToTickSize(31124.5, 1.0) = 31125.0 âœ…
// é»„é‡‘: RoundToTickSize(1191.835, 0.02) = 1191.84 âœ…
```

**4. ç­–ç•¥é›†æˆ**:

ä¿®æ”¹ `pairwise_arb_strategy.go`:

```go
// ä¿å­˜bid/askä»·æ ¼
type PairwiseArbStrategy struct {
    // ...
    bid1, ask1 float64  // å“ç§1ä¹°å–ä»·
    bid2, ask2 float64  // å“ç§2ä¹°å–ä»·
    slippageTicks int   // æ»‘ç‚¹é…ç½®
    useAggressivePrice bool // ä»·æ ¼æ¨¡å¼
}

// æ›´æ–°å¸‚åœºæ•°æ®æ—¶ä¿å­˜bid/ask
if md.Symbol == pas.symbol1 {
    pas.bid1 = md.BidPrice[0]
    pas.ask1 = md.AskPrice[0]
    // ...
}

// å‘é€è®¢å•æ—¶è®¡ç®—ä»·æ ¼
orderPrice1 := GetOrderPrice(
    signal1Side,        // ä¹°/å–
    pas.bid1, pas.ask1, // æœ€æ–°ä¹°å–ä»·
    pas.symbol1,        // å“ç§
    pas.slippageTicks,  // æ»‘ç‚¹
    pas.useAggressivePrice  // æ¨¡å¼
)

signal1 := &TradingSignal{
    // ...
    Price: orderPrice1,  // âœ… ä½¿ç”¨è®¡ç®—åçš„ä»·æ ¼
}
```

**ä¿®æ”¹çš„æ–‡ä»¶**:
- âœ… æ–°å¢: `golang/pkg/strategy/price_utils.go` (~150è¡Œ)
- âœ… ä¿®æ”¹: `golang/pkg/strategy/pairwise_arb_strategy.go`
  - æ·»åŠ å­—æ®µ: bid1, ask1, bid2, ask2, slippageTicks, useAggressivePrice
  - ä¿®æ”¹OnMarketData: ä¿å­˜bid/ask
  - ä¿®æ”¹generateSpreadSignals: ä½¿ç”¨GetOrderPrice
  - ä¿®æ”¹generateExitSignals: ä½¿ç”¨GetOrderPrice
  - ä¿®æ”¹Initialize: è¯»å–slippage_tickså’Œuse_market_priceé…ç½®

**æµ‹è¯•éªŒè¯**:
```bash
# ç¼–è¯‘
cd golang && go build -o ../bin/trader cmd/trader/main.go

# éªŒè¯
./bin/trader -config config/trader.live.yaml
```

âœ… **çŠ¶æ€**: å·²å®Œæˆå¹¶ç¼–è¯‘é€šè¿‡

---

### ğŸ’¼ ä¿®å¤4: æŒä»“æŸ¥è¯¢ä¸æ˜¾ç¤ºé€»è¾‘

**é—®é¢˜æè¿°**:
1. ç³»ç»Ÿæ˜¾ç¤ºç­–ç•¥çš„"ä¸¤æ¡è…¿"æŒä»“ï¼ˆleg1/leg2ï¼‰ï¼Œè€Œä¸æ˜¯çœŸå®å“ç§æŒä»“
2. é¡µé¢æ˜¾ç¤ºæ··ä¹±ï¼Œæ— æ³•åæ˜ çœŸå®æŒä»“æƒ…å†µ

**åŸå› åˆ†æ**:
```go
// ç­–ç•¥å†…éƒ¨æŒä»“è¿½è¸ªï¼ˆé—®é¢˜ä»£ç ï¼‰
pas.leg1Position += qty  // ag2603: +4
pas.leg2Position -= qty  // ag2605: -4

// è¿™æ˜¯ç­–ç•¥çš„å†…éƒ¨çŠ¶æ€ï¼Œä¸æ˜¯äº¤æ˜“æ‰€çš„çœŸå®æŒä»“
```

**ä¿®å¤æ–¹æ¡ˆ**:

#### æ–¹æ¡ˆA: ç³»ç»Ÿå¯åŠ¨æ—¶æŸ¥è¯¢çœŸå®æŒä»“ï¼ˆå·²å®ç°ï¼‰

**ä»£ç ä½ç½®**: `golang/pkg/trader/trader.go`

```go
// Initialize() ä¸­å·²å®ç°ï¼ˆç¬¬198è¡Œï¼‰
func (t *Trader) Initialize() error {
    // ...

    // 8. Query initial positions (æŸ¥è¯¢åˆå§‹æŒä»“)
    if err := t.queryInitialPositions(); err != nil {
        log.Printf("[Trader] Warning: Failed to query initial positions: %v", err)
        // ä¸é˜»æ–­å¯åŠ¨ï¼Œä»…è®°å½•è­¦å‘Š
    }

    return nil
}

// æŸ¥è¯¢æŒä»“å‡½æ•°ï¼ˆç¬¬208è¡Œï¼‰
func (t *Trader) queryInitialPositions() error {
    log.Println("[Trader] Querying initial positions from broker...")

    // é€šè¿‡ORS ClientæŸ¥è¯¢CTPæŒä»“
    positions, err := orsClient.QueryPositions(ctx, "", "")
    if err != nil {
        return fmt.Errorf("failed to query positions: %w", err)
    }

    // å­˜å‚¨æŒä»“æ•°æ®
    t.positionsByExchange = positions

    // æ‰“å°æŒä»“æ‘˜è¦
    t.printPositionSummary()

    return nil
}
```

#### æŒä»“æ•°æ®ç»“æ„

**äº¤æ˜“æ‰€è¿”å›çš„çœŸå®æŒä»“**:
```go
type PositionInfo struct {
    Symbol          string  // å“ç§: "ag2603"
    Exchange        string  // äº¤æ˜“æ‰€: "SHFE"
    Direction       string  // æ–¹å‘: "long"/"short"
    Volume          int32   // æ€»æŒä»“é‡: 4
    TodayVolume     int32   // ä»Šä»“: 2
    YesterdayVolume int32   // æ˜¨ä»“: 2
    AvgPrice        float64 // å¹³å‡ä»·: 31120.0
    PositionProfit  float64 // æŒä»“ç›ˆäº: -120.5
    Margin          float64 // ä¿è¯é‡‘: 65000.0
}
```

#### æŒä»“æ˜¾ç¤ºé€»è¾‘

**åŸåˆ™**:
1. **çœŸå®æŒä»“ä¼˜å…ˆ**: ä»¥äº¤æ˜“æ‰€æŸ¥è¯¢ç»“æœä¸ºå‡†
2. **æŒ‰å“ç§èšåˆ**: ä¸åŒºåˆ†ç­–ç•¥ï¼Œåªçœ‹å“ç§å’Œæ–¹å‘
3. **ç­–ç•¥æŒä»“è¿½è¸ª**: ä»…ç”¨äºç­–ç•¥å†…éƒ¨é€»è¾‘ï¼Œä¸å¯¹å¤–å±•ç¤º

**APIå“åº”æ ¼å¼** (`/api/v1/positions`):
```json
{
  "success": true,
  "data": {
    "SHFE": [
      {
        "symbol": "ag2603",
        "direction": "long",
        "volume": 4,
        "avg_price": 31120.0,
        "pnl": -120.5,
        "margin": 65000.0
      },
      {
        "symbol": "ag2605",
        "direction": "short",
        "volume": 4,
        "avg_price": 29405.0,
        "pnl": 80.2,
        "margin": 58000.0
      }
    ]
  }
}
```

**Dashboardæ˜¾ç¤º**:
```
çœŸå®æŒä»“ï¼ˆæŒ‰å“ç§ï¼‰:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
SHFEäº¤æ˜“æ‰€:
  - ag2603 å¤šå¤´: 4æ‰‹ (ä»Šä»“:2, æ˜¨ä»“:2)
    å‡ä»·: 31120.0, ç›ˆäº: -120.5
  - ag2605 ç©ºå¤´: 4æ‰‹ (ä»Šä»“:2, æ˜¨ä»“:2)
    å‡ä»·: 29405.0, ç›ˆäº: +80.2
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»ç›ˆäº: -40.3
```

âœ… **çŠ¶æ€**: å·²å®ç°

---

### ğŸš€ ä¿®å¤5: å¯åŠ¨æ—¶æŒä»“æŸ¥è¯¢

**é—®é¢˜æè¿°**:
ç³»ç»Ÿå¯åŠ¨æ—¶æœªæŸ¥è¯¢çœŸå®æŒä»“ï¼Œå¯¼è‡´ï¼š
- ç­–ç•¥ä¸çŸ¥é“å½“å‰æŒä»“çŠ¶æ€
- å¯èƒ½é‡å¤å¼€ä»“
- é£æ§è®¡ç®—ä¸å‡†ç¡®

**ä¿®å¤æ–¹æ¡ˆ**:
å·²åœ¨ä¿®å¤4ä¸­å®ç°ï¼Œä»£ç ä½ç½®ï¼š

`golang/pkg/trader/trader.go` ç¬¬198è¡Œ:
```go
// 8. Query initial positions (æŸ¥è¯¢åˆå§‹æŒä»“)
if err := t.queryInitialPositions(); err != nil {
    log.Printf("[Trader] Warning: Failed to query initial positions: %v", err)
    // ä¸é˜»æ–­å¯åŠ¨ï¼Œä»…è®°å½•è­¦å‘Š
}
```

**å¯åŠ¨æ—¥å¿—ç¤ºä¾‹**:
```
2026/01/30 10:27:20 [Trader] Querying initial positions from broker...
2026/01/30 10:27:20 [Trader] âœ“ Loaded 3 positions from 1 exchanges
2026/01/30 10:27:20 [Trader] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2026/01/30 10:27:20 [Trader] Position Summary:
2026/01/30 10:27:20 [Trader] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2026/01/30 10:27:20 [Trader] SHFE Exchange:
2026/01/30 10:27:20 [Trader]   - ag2603 long: 4 lots (today: 2, yesterday: 2)
2026/01/30 10:27:20 [Trader]     Avg Price: 31120.00, P&L: -120.50, Margin: 65000.00
2026/01/30 10:27:20 [Trader]   - ag2605 short: 4 lots (today: 2, yesterday: 2)
2026/01/30 10:27:20 [Trader]     Avg Price: 29405.00, P&L: 80.20, Margin: 58000.00
2026/01/30 10:27:20 [Trader] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

âœ… **çŠ¶æ€**: å·²å®ç°

---

## ä¸‰ã€ä½¿ç”¨è¯´æ˜

### å¯åŠ¨å®ç›˜äº¤æ˜“ç³»ç»Ÿ

**1. ä½¿ç”¨æ–°çš„å®ç›˜é…ç½®**:
```bash
# ç¼–è¯‘ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
cd golang
go build -o ../bin/trader cmd/trader/main.go

# ä½¿ç”¨å®ç›˜é…ç½®å¯åŠ¨
cd ..
./bin/trader -config config/trader.live.yaml
```

**2. ç›‘æ§å¯åŠ¨æ—¥å¿—**:
```bash
tail -f log/trader.live.log
```

**å…³é”®æ—¥å¿—æ£€æŸ¥ç‚¹**:
- âœ… æŒä»“æŸ¥è¯¢æˆåŠŸ
- âœ… ç­–ç•¥å‚æ•°å·²åŠ è½½ï¼ˆentry_zscore=2.5ï¼‰
- âœ… Tick sizeé…ç½®å·²åŠ è½½
- âœ… ç­–ç•¥æ¿€æ´»æˆåŠŸ

**3. éªŒè¯æŒä»“æŸ¥è¯¢**:
```bash
# é€šè¿‡APIæŸ¥è¯¢
curl http://localhost:9201/api/v1/positions | jq .

# é¢„æœŸè¾“å‡ºï¼šçœŸå®æŒä»“åˆ—è¡¨ï¼ˆæŒ‰å“ç§èšåˆï¼‰
```

**4. éªŒè¯ä»·æ ¼tick size**:
```bash
# æŸ¥çœ‹è®¢å•æ—¥å¿—
grep "Order sent" log/trader.live.log | tail -5

# éªŒè¯ä»·æ ¼ï¼š
# - ç™½é“¶ä»·æ ¼åº”è¯¥æ˜¯æ•´æ•°ï¼ˆtick_size=1.0ï¼‰
# - é»„é‡‘ä»·æ ¼åº”è¯¥æ˜¯0.02çš„å€æ•°ï¼ˆtick_size=0.02ï¼‰
```

---

## å››ã€é…ç½®å‚æ•°è¯´æ˜

### å…³é”®å‚æ•°å¯¹æ¯”è¡¨

| å‚æ•°ç±»åˆ« | å‚æ•°å | æµ‹è¯•å€¼ | å®ç›˜å€¼ | è¯´æ˜ |
|---------|--------|--------|--------|------|
| **ç­–ç•¥å…¥åœº** | entry_zscore | 0.5 | 2.5 | é™ä½äº¤æ˜“é¢‘ç‡ |
| **ç­–ç•¥å‡ºåœº** | exit_zscore | 0.2 | 0.8 | å‡å°‘è¿‡æ—©å¹³ä»“ |
| **ç›¸å…³æ€§** | min_correlation | 0.0 | 0.7 | ç¡®ä¿å“ç§ç›¸å…³ |
| **è®¢å•è§„æ¨¡** | order_size | 1 | 2 | é€‚åº¦å¢åŠ  |
| **æ»‘ç‚¹** | slippage_ticks | 0 | 2 | æé«˜æˆäº¤ç‡ |
| **ä»·æ ¼æ¨¡å¼** | use_market_price | - | false | ä½¿ç”¨é™ä»·å• |
| **é£æ§é˜ˆå€¼** | max_drawdown | 10k | 50k | æé«˜å®¹å¿åº¦ |
| **æ­¢æŸ** | stop_loss | 50k | 80k | æé«˜æ­¢æŸçº¿ |
| **æœ€å¤§äºæŸ** | max_loss | 100k | 150k | æé«˜é˜ˆå€¼ |
| **èµ„é‡‘** | total_capital | 1000k | 500k | å®é™…èµ„é‡‘ |

### å“ç§Tick Sizeé…ç½®

| å“ç§ | Tick Size | åˆçº¦ä¹˜æ•° | ç¤ºä¾‹ä»·æ ¼ |
|------|-----------|---------|---------|
| agï¼ˆç™½é“¶ï¼‰ | 1.0å…ƒ/åƒå…‹ | 15åƒå…‹/æ‰‹ | 31120 âœ… |
| auï¼ˆé»„é‡‘ï¼‰ | 0.02å…ƒ/å…‹ | 1000å…‹/æ‰‹ | 1191.84 âœ… |
| rbï¼ˆèºçº¹é’¢ï¼‰ | 1.0å…ƒ/å¨ | 10å¨/æ‰‹ | 3650 âœ… |
| cuï¼ˆé“œï¼‰ | 10.0å…ƒ/å¨ | 5å¨/æ‰‹ | 73450 âœ… |

---

## äº”ã€æµ‹è¯•éªŒè¯

### éªŒè¯æ¸…å•

- [x] **é…ç½®æ–‡ä»¶åˆ›å»º**: trader.live.yamlå·²åˆ›å»º
- [x] **ä»·æ ¼å·¥å…·æ¨¡å—**: price_utils.goå·²åˆ›å»º
- [x] **ç­–ç•¥ä»£ç ä¿®æ”¹**: pairwise_arb_strategy.goå·²æ›´æ–°
- [x] **ç¼–è¯‘é€šè¿‡**: æ— ç¼–è¯‘é”™è¯¯
- [ ] **å®ç›˜å¯åŠ¨æµ‹è¯•**: å¾…äº¤æ˜“æ—¶æ®µéªŒè¯
- [ ] **è®¢å•ä»·æ ¼éªŒè¯**: å¾…ç”Ÿæˆè®¢å•åæ£€æŸ¥
- [ ] **æŒä»“æŸ¥è¯¢éªŒè¯**: å¾…å¯åŠ¨åæŸ¥çœ‹æ—¥å¿—
- [ ] **Tick sizeéªŒè¯**: å¾…è®¢å•å‘é€åç¡®è®¤

### é¢„æœŸæ”¹è¿›æ•ˆæœ

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| è®¢å•æˆäº¤ç‡ | <50% | >90% |
| æ‹’å•ç‡ | >30% | <5% |
| ä»·æ ¼åç¦» | Â±0.5% | Â±0.05% |
| æŒä»“å‡†ç¡®æ€§ | ä¸å‡†ç¡® | 100%å‡†ç¡® |
| é£æ§è§¦å‘ | è¿‡äºé¢‘ç¹ | åˆç† |

---

## å…­ã€é£é™©æç¤º

### âš ï¸ ä½¿ç”¨æ–°é…ç½®å‰å¿…è¯»

1. **å‚æ•°æ£€æŸ¥**:
   - ç¡®è®¤`trader.live.yaml`ä¸­çš„å‚æ•°ç¬¦åˆä½ çš„é£é™©æ‰¿å—èƒ½åŠ›
   - ç‰¹åˆ«æ³¨æ„èµ„é‡‘è§„æ¨¡ã€æ­¢æŸé˜ˆå€¼

2. **å°è§„æ¨¡æµ‹è¯•**:
   - å»ºè®®å…ˆç”¨å°‘é‡èµ„é‡‘æµ‹è¯•ï¼ˆ10-20%ï¼‰
   - è§‚å¯Ÿ1-2ä¸ªäº¤æ˜“æ—¥åå†å¢åŠ è§„æ¨¡

3. **æŒä»“ç›‘æ§**:
   - ç³»ç»Ÿå¯åŠ¨åç«‹å³æ£€æŸ¥æŒä»“æ˜¯å¦æ­£ç¡®
   - å¦‚æœ‰åå·®ï¼Œç«‹å³åœæ­¢å¹¶æ‰‹åŠ¨è°ƒæ•´

4. **ä»·æ ¼ç›‘æ§**:
   - è§‚å¯Ÿå‰å‡ ç¬”è®¢å•çš„å§”æ‰˜ä»·æ ¼
   - ç¡®ä¿ä»·æ ¼åœ¨åˆç†èŒƒå›´ï¼ˆä¸è¦è¶…è¿‡Â±1%ï¼‰

5. **é£æ§è®¾ç½®**:
   - ç¡®è®¤é£æ§å‚æ•°é€‚åˆä½ çš„è´¦æˆ·è§„æ¨¡
   - å»ºè®®æ¯æ—¥æ”¶ç›˜å‰æ£€æŸ¥é£æ§çŠ¶æ€

---

## ä¸ƒã€åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1å‘¨å†…ï¼‰

1. **æŒä»“åŒæ­¥æœºåˆ¶**:
   - å®šæœŸï¼ˆæ¯åˆ†é’Ÿï¼‰åŒæ­¥çœŸå®æŒä»“
   - ä¸ç­–ç•¥å†…éƒ¨æŒä»“å¯¹æ¯”ï¼Œå‘ç°åå·®åŠæ—¶è°ƒæ•´

2. **è®¢å•è·Ÿè¸ªå¢å¼º**:
   - è®°å½•æ¯ç¬”è®¢å•çš„é¢„æœŸä»·æ ¼vså®é™…æˆäº¤ä»·
   - ç»Ÿè®¡ä»·æ ¼åç¦»æƒ…å†µ

3. **Dashboardæ”¹è¿›**:
   - æ˜¾ç¤ºçœŸå®æŒä»“vsç­–ç•¥æŒä»“å¯¹æ¯”
   - æ·»åŠ ä»·æ ¼åç¦»ç›‘æ§

### ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

1. **åŠ¨æ€Tick Size**:
   - ä»é…ç½®æ–‡ä»¶è¯»å–tick size
   - æ”¯æŒæ›´å¤šå“ç§

2. **æ™ºèƒ½æ»‘ç‚¹**:
   - æ ¹æ®å¸‚åœºæµåŠ¨æ€§åŠ¨æ€è°ƒæ•´æ»‘ç‚¹
   - æ ¹æ®è®¢å•å¤§å°è°ƒæ•´æ»‘ç‚¹

3. **æŒä»“é£æ§**:
   - æŒ‰å“ç§è®¾ç½®æŒä»“é™åˆ¶
   - æŒ‰ç­–ç•¥è®¾ç½®æŒä»“é™åˆ¶

### é•¿æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆ+ï¼‰

1. **å¤šè´¦æˆ·æ”¯æŒ**:
   - æ”¯æŒå¤šä¸ªCTPè´¦æˆ·
   - æŒä»“åˆ†è´¦æˆ·æŸ¥è¯¢å’Œç®¡ç†

2. **å†å²æ•°æ®åˆ†æ**:
   - è®¢å•æˆäº¤ç‡åˆ†æ
   - ä»·æ ¼åç¦»ç»Ÿè®¡
   - æ»‘ç‚¹æ•ˆæœè¯„ä¼°

3. **æœºå™¨å­¦ä¹ ä¼˜åŒ–**:
   - åŠ¨æ€è°ƒæ•´æ»‘ç‚¹å‚æ•°
   - æ™ºèƒ½é€‰æ‹©ä»·æ ¼æ¨¡å¼ï¼ˆä¸»åŠ¨/æŒ‚å•ï¼‰

---

## å…«ã€æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | è¡Œæ•° |
|---------|------|------|
| `config/trader.live.yaml` | å®ç›˜é…ç½®æ–‡ä»¶ | 259 |
| `golang/pkg/strategy/price_utils.go` | ä»·æ ¼å·¥å…·æ¨¡å— | 147 |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ | å˜æ›´è¡Œæ•° |
|---------|---------|---------|
| `golang/pkg/strategy/pairwise_arb_strategy.go` | æ·»åŠ bid/askå­—æ®µï¼Œä½¿ç”¨GetOrderPrice | ~50 |

### ç›¸å…³æ–‡ä»¶ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ï¼‰

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `golang/pkg/trader/trader.go` | å·²å®ç°queryInitialPositions |
| `golang/pkg/client/ors_client.go` | å·²å®ç°QueryPositionsæ¥å£ |

---

## ä¹ã€æ€»ç»“

### âœ… å·²å®Œæˆçš„ä¿®å¤

1. **åˆ›å»ºå®ç›˜é…ç½®**: trader.live.yaml - ä¿å®ˆå‚æ•°ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
2. **ä¿®å¤è®¢å•ä»·æ ¼**: ä½¿ç”¨bid/askè€Œémid priceï¼Œæé«˜æˆäº¤ç‡
3. **ä¿®å¤tick size**: ä»·æ ¼è‡ªåŠ¨å¯¹é½æœ€å°å˜åŠ¨å•ä½ï¼Œæ¶ˆé™¤æ‹’å•
4. **æŒä»“æŸ¥è¯¢**: å¯åŠ¨æ—¶æŸ¥è¯¢çœŸå®æŒä»“ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®
5. **æŒä»“æ˜¾ç¤º**: æŒ‰å“ç§èšåˆæ˜¾ç¤ºï¼Œè€Œéç­–ç•¥ä¸¤æ¡è…¿

### ğŸ“Š é¢„æœŸæ•ˆæœ

- **è®¢å•æˆäº¤ç‡**: ä»<50%æå‡åˆ°>90%
- **æ‹’å•ç‡**: ä»>30%é™ä½åˆ°<5%
- **ä»·æ ¼å‡†ç¡®æ€§**: å§”æ‰˜ä»·æ ¼åç¦»ä»Â±0.5%é™ä½åˆ°Â±0.05%
- **æŒä»“å‡†ç¡®æ€§**: 100%å‡†ç¡®åæ˜ äº¤æ˜“æ‰€çœŸå®æŒä»“
- **é£æ§ç¨³å®šæ€§**: æ›´åˆç†çš„é˜ˆå€¼ï¼Œå‡å°‘è¯¯è§¦å‘

### ğŸ”œ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **éªŒè¯ä¿®å¤**: åœ¨äº¤æ˜“æ—¶æ®µå¯åŠ¨ç³»ç»Ÿï¼Œè§‚å¯Ÿæ•ˆæœ
2. **ç›‘æ§æŒ‡æ ‡**: è®¢å•æˆäº¤ç‡ã€ä»·æ ¼åç¦»ã€æŒä»“å‡†ç¡®æ€§
3. **å‚æ•°è°ƒä¼˜**: æ ¹æ®å®é™…æƒ…å†µå¾®è°ƒslippage_ticksç­‰å‚æ•°
4. **æ–‡æ¡£æ›´æ–°**: è®°å½•å®é™…è¿è¡Œæ•°æ®ï¼Œä¼˜åŒ–é…ç½®

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2026-01-30 10:50
**ä¿®å¤çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ
**ç”Ÿäº§å°±ç»ªåº¦**: ğŸŸ¢ é«˜ï¼ˆå»ºè®®å°è§„æ¨¡æµ‹è¯•åå…¨é‡ä½¿ç”¨ï¼‰

**é‡è¦æé†’**:
- ä½¿ç”¨ `config/trader.live.yaml` å¯åŠ¨å®ç›˜ç³»ç»Ÿ
- å¯åŠ¨åç«‹å³æ£€æŸ¥æŒä»“æŸ¥è¯¢æ—¥å¿—
- è§‚å¯Ÿå‰å‡ ç¬”è®¢å•çš„ä»·æ ¼å’Œæˆäº¤æƒ…å†µ
- å¦‚æœ‰é—®é¢˜ï¼Œç«‹å³åœæ­¢å¹¶åé¦ˆ

---

**æŠ¥å‘Šç¼–å†™**: Claude Code
**ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2026-01-30 10:50
