# QuantlinkTrader Test Configuration File
# æµ‹è¯•ä¸“ç”¨é…ç½® - æ— äº¤æ˜“æ—¶æ®µé™åˆ¶ï¼Œå…¨å¤©è¿è¡Œ
# ä½¿ç”¨æ–¹æ³•: ./bin/trader -config config/trader.test.yaml

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# System Configuration
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
system:
  mode: "live"                          # è¿è¡Œæ¨¡å¼: live, backtest, simulation
  multi_strategy: true                  # å¯ç”¨å¤šç­–ç•¥æ¨¡å¼ï¼ˆç”¨äºè®¢å•å’ŒæŒä»“è¿½è¸ªï¼‰

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Strategy Configuration (Multi-Strategy Mode)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
strategies:
  # ç­–ç•¥1: ç™½é“¶é…å¯¹å¥—åˆ© (ag2603/ag2605)
  - id: "test_92201"                    # ç­–ç•¥å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç™½é“¶ï¼‰
    type: "pairwise_arb"                # ç­–ç•¥ç±»å‹: pairwise_arb
    enabled: true                       # æ˜¯å¦å¯ç”¨æ­¤ç­–ç•¥
    allocation: 0.3                     # èµ„é‡‘åˆ†é…æ¯”ä¾‹ (30%)
    symbols:                            # äº¤æ˜“å“ç§ï¼ˆé…å¯¹äº¤æ˜“éœ€è¦ä¸¤ä¸ªï¼‰
      - "ag2603"                        # ç™½é“¶ 2026å¹´3æœˆ
      - "ag2605"                        # ç™½é“¶ 2026å¹´5æœˆ
    exchanges:                          # äº¤æ˜“æ‰€
      - "SHFE"                          # ä¸ŠæœŸæ‰€
    max_position_size: 100              # æœ€å¤§æŒä»“æ•°é‡
    max_exposure: 300000.0              # æœ€å¤§é£é™©æ•å£

    # Strategy-specific parameters (ç­–ç•¥ç‰¹å®šå‚æ•°)
    parameters:
      spread_type: "difference"         # ä»·å·®ç±»å‹: difference, ratio, log
      lookback_period: 100.0            # å›çœ‹å‘¨æœŸ
      entry_zscore: 0.5                 # å…¥åœºZ-Scoreé˜ˆå€¼ï¼ˆé™ä½ä»¥ä¾¿æµ‹è¯•ï¼‰
      exit_zscore: 0.2                  # å‡ºåœºZ-Scoreé˜ˆå€¼
      order_size: 1.0                   # æ¯æ¡è…¿çš„ä¸‹å•æ•°é‡ï¼ˆæµ‹è¯•ç”¨1æ‰‹ï¼‰
      min_correlation: 0.0              # æœ€å°ç›¸å…³ç³»æ•°ï¼ˆæµ‹è¯•æ—¶è®¾ä¸º0ï¼‰
      # åŠ¨æ€é˜ˆå€¼å‚æ•°
      use_dynamic_threshold: true       # å¯ç”¨åŠ¨æ€é˜ˆå€¼
      begin_zscore: 0.5                 # ç©ºä»“å…¥åœºé˜ˆå€¼
      long_zscore: 1.5                  # æ»¡ä»“å¤šå¤´æ—¶åšå¤šé˜ˆå€¼
      short_zscore: 1.5                 # æ»¡ä»“ç©ºå¤´æ—¶åšç©ºé˜ˆå€¼
      # ä¸»åŠ¨è¿½å•å‚æ•°
      aggressive_enabled: true          # å¯ç”¨è¿½å•
      aggressive_interval_ms: 500.0     # è¿½å•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
      aggressive_max_retry: 4.0         # æœ€å¤§è¿½å•æ¬¡æ•°
      aggressive_slop_ticks: 20.0       # è·³è·ƒtickæ•°
      aggressive_fail_threshold: 3.0    # å¤±è´¥é˜ˆå€¼
      supporting_orders: 3              # ğŸ”’ é™åˆ¶è¿½å•æ•°é‡ï¼ˆC++: SUPPORTING_ORDERSï¼‰
      # å¤šå±‚æŒ‚å•å‚æ•°ï¼ˆC++: MAX_QUOTE_LEVELï¼‰
      enable_multi_level: true          # æ˜¯å¦å¯ç”¨å¤šå±‚æŒ‚å•ï¼ˆæµ‹è¯•ï¼šå¼€å¯ï¼‰
      max_quote_level: 3                # æœ€å¤§æŒ‚å•å±‚æ•°
      quote_level_sizes: [4, 3, 2]      # æ¯å±‚ä¸‹å•é‡
      # ä»·æ ¼ä¼˜åŒ–å‚æ•°
      enable_price_optimize: false      # æ˜¯å¦å¯ç”¨ä»·æ ¼ä¼˜åŒ–ï¼ˆé»˜è®¤å…³é—­ï¼‰
      price_optimize_gap: 2             # è§¦å‘ä¼˜åŒ–çš„ tick è·³è·ƒæ•°
      tick_size_1: 1.0                  # Leg1 æœ€å°å˜åŠ¨å•ä½
      tick_size_2: 1.0                  # Leg2 æœ€å°å˜åŠ¨å•ä½

  # ç­–ç•¥2: é»„é‡‘é…å¯¹å¥—åˆ© (au2604/au2606)
  - id: "test_92202"                    # ç­–ç•¥å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆé»„é‡‘ï¼‰
    type: "pairwise_arb"                # ç­–ç•¥ç±»å‹: pairwise_arb
    enabled: true                       # æ˜¯å¦å¯ç”¨æ­¤ç­–ç•¥
    allocation: 0.4                     # èµ„é‡‘åˆ†é…æ¯”ä¾‹ (40%)
    symbols:                            # äº¤æ˜“å“ç§ï¼ˆé…å¯¹äº¤æ˜“éœ€è¦ä¸¤ä¸ªï¼‰
      - "au2604"                        # é»„é‡‘ 2026å¹´4æœˆ
      - "au2606"                        # é»„é‡‘ 2026å¹´6æœˆ
    exchanges:                          # äº¤æ˜“æ‰€
      - "SHFE"                          # ä¸ŠæœŸæ‰€
    max_position_size: 50               # æœ€å¤§æŒä»“æ•°é‡ï¼ˆé»„é‡‘ä»·æ ¼é«˜ï¼Œæ•°é‡å°‘ï¼‰
    max_exposure: 400000.0              # æœ€å¤§é£é™©æ•å£

    # Strategy-specific parameters (ç­–ç•¥ç‰¹å®šå‚æ•°)
    parameters:
      spread_type: "difference"         # ä»·å·®ç±»å‹: difference, ratio, log
      lookback_period: 100.0            # å›çœ‹å‘¨æœŸ
      entry_zscore: 0.6                 # å…¥åœºZ-Scoreé˜ˆå€¼ï¼ˆé»„é‡‘æ³¢åŠ¨è¾ƒå°ï¼‰
      exit_zscore: 0.2                  # å‡ºåœºZ-Scoreé˜ˆå€¼
      order_size: 1.0                   # æ¯æ¡è…¿çš„ä¸‹å•æ•°é‡ï¼ˆæµ‹è¯•ç”¨1æ‰‹ï¼‰
      min_correlation: 0.0              # æœ€å°ç›¸å…³ç³»æ•°ï¼ˆæµ‹è¯•æ—¶è®¾ä¸º0ï¼‰
      # åŠ¨æ€é˜ˆå€¼å‚æ•°
      use_dynamic_threshold: true       # å¯ç”¨åŠ¨æ€é˜ˆå€¼
      begin_zscore: 0.6                 # ç©ºä»“å…¥åœºé˜ˆå€¼
      long_zscore: 1.8                  # æ»¡ä»“å¤šå¤´æ—¶åšå¤šé˜ˆå€¼
      short_zscore: 1.8                 # æ»¡ä»“ç©ºå¤´æ—¶åšç©ºé˜ˆå€¼
      # ä¸»åŠ¨è¿½å•å‚æ•°
      aggressive_enabled: true          # å¯ç”¨è¿½å•
      aggressive_interval_ms: 500.0     # è¿½å•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
      aggressive_max_retry: 4.0         # æœ€å¤§è¿½å•æ¬¡æ•°
      aggressive_slop_ticks: 10.0       # è·³è·ƒtickæ•°ï¼ˆé»„é‡‘tick sizeè¾ƒå°ï¼‰
      aggressive_fail_threshold: 3.0    # å¤±è´¥é˜ˆå€¼
      supporting_orders: 3              # ğŸ”’ é™åˆ¶è¿½å•æ•°é‡ï¼ˆC++: SUPPORTING_ORDERSï¼‰

  # ç­–ç•¥3: ç™½é“¶è¿‘æœˆé…å¯¹å¥—åˆ© (ag2603/ag2603) - æ¼”ç¤ºå¤šç­–ç•¥
  - id: "test_92203"                    # ç­–ç•¥å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç™½é“¶è¿‘æœˆï¼‰
    type: "pairwise_arb"                # ç­–ç•¥ç±»å‹: pairwise_arb
    enabled: true                       # æ˜¯å¦å¯ç”¨æ­¤ç­–ç•¥
    allocation: 0.3                     # èµ„é‡‘åˆ†é…æ¯”ä¾‹ (30%)
    symbols:                            # äº¤æ˜“å“ç§ï¼ˆé…å¯¹äº¤æ˜“éœ€è¦ä¸¤ä¸ªï¼‰
      - "ag2603"                        # ç™½é“¶ 2026å¹´3æœˆ
      - "ag2605"                        # ç™½é“¶ 2026å¹´5æœˆ
    exchanges:                          # äº¤æ˜“æ‰€
      - "SHFE"                          # ä¸ŠæœŸæ‰€
    max_position_size: 80               # æœ€å¤§æŒä»“æ•°é‡
    max_exposure: 300000.0              # æœ€å¤§é£é™©æ•å£

    # Strategy-specific parameters (ç­–ç•¥ç‰¹å®šå‚æ•°)
    parameters:
      spread_type: "difference"         # ä»·å·®ç±»å‹: difference, ratio, log
      lookback_period: 80.0             # å›çœ‹å‘¨æœŸï¼ˆæ›´çŸ­ï¼‰
      entry_zscore: 0.7                 # å…¥åœºZ-Scoreé˜ˆå€¼ï¼ˆæ›´ä¿å®ˆï¼‰
      exit_zscore: 0.3                  # å‡ºåœºZ-Scoreé˜ˆå€¼
      order_size: 1.0                   # æ¯æ¡è…¿çš„ä¸‹å•æ•°é‡ï¼ˆæµ‹è¯•ç”¨1æ‰‹ï¼‰
      min_correlation: 0.0              # æœ€å°ç›¸å…³ç³»æ•°ï¼ˆæµ‹è¯•æ—¶è®¾ä¸º0ï¼‰
      # åŠ¨æ€é˜ˆå€¼å‚æ•°
      use_dynamic_threshold: true       # å¯ç”¨åŠ¨æ€é˜ˆå€¼
      begin_zscore: 0.7                 # ç©ºä»“å…¥åœºé˜ˆå€¼
      long_zscore: 2.0                  # æ»¡ä»“å¤šå¤´æ—¶åšå¤šé˜ˆå€¼
      short_zscore: 2.0                 # æ»¡ä»“ç©ºå¤´æ—¶åšç©ºé˜ˆå€¼
      # ä¸»åŠ¨è¿½å•å‚æ•°
      aggressive_enabled: true          # å¯ç”¨è¿½å•
      aggressive_interval_ms: 500.0     # è¿½å•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
      aggressive_max_retry: 4.0         # æœ€å¤§è¿½å•æ¬¡æ•°
      aggressive_slop_ticks: 20.0       # è·³è·ƒtickæ•°
      aggressive_fail_threshold: 3.0    # å¤±è´¥é˜ˆå€¼
      supporting_orders: 3              # ğŸ”’ é™åˆ¶è¿½å•æ•°é‡ï¼ˆC++: SUPPORTING_ORDERSï¼‰

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Trading Session Configuration (äº¤æ˜“æ—¶æ®µé…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
session:
  start_time: "00:00:00"                # å¼€å§‹æ—¶é—´ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰- æµ‹è¯•æ¨¡å¼ï¼šå…¨å¤©
  end_time: "23:59:59"                  # ç»“æŸæ—¶é—´ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰- æµ‹è¯•æ¨¡å¼ï¼šå…¨å¤©
  timezone: "Asia/Shanghai"             # æ—¶åŒº
  auto_start: true                      # è‡ªåŠ¨å¯åŠ¨Session Manager
  auto_stop: false                      # è‡ªåŠ¨åœæ­¢ç­–ç•¥ - æµ‹è¯•æ¨¡å¼ï¼šç¦ç”¨è‡ªåŠ¨åœæ­¢
  auto_activate: false                  # è‡ªåŠ¨æ¿€æ´»ç­–ç•¥ - falseæ—¶éœ€è¦æ‰‹åŠ¨æ¿€æ´»ï¼ˆæ¨èï¼‰

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Risk Management Configuration (é£é™©ç®¡ç†é…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
risk:
  max_drawdown: 10000.0                 # æœ€å¤§å›æ’¤é™åˆ¶
  stop_loss: 50000.0                    # æ­¢æŸé‡‘é¢ï¼ˆå¯¹åº” tbsrc STOP_LOSSï¼‰
  max_loss: 100000.0                    # æœ€å¤§äºæŸé™åˆ¶ï¼ˆå¯¹åº” tbsrc MAX_LOSSï¼‰
  daily_loss_limit: 200000.0            # æ¯æ—¥äºæŸé™åˆ¶
  max_reject_count: 10                  # æœ€å¤§æ‹’å•æ¬¡æ•°
  check_interval_ms: 100                # é£é™©æ£€æŸ¥é—´éš”ï¼ˆæ¯«ç§’ï¼‰

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Strategy Engine Configuration (ç­–ç•¥å¼•æ“é…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
engine:
  ors_gateway_addr: "localhost:50052"   # è®¢å•è·¯ç”±æœåŠ¡åœ°å€
  nats_addr: "nats://localhost:4222"    # NATS æ¶ˆæ¯é˜Ÿåˆ—åœ°å€
  counter_bridge_addr: "localhost:8080"  # Counter Bridge HTTPåœ°å€ï¼ˆæŒä»“æŸ¥è¯¢ï¼‰
  order_queue_size: 100                 # è®¢å•é˜Ÿåˆ—å¤§å°
  timer_interval: 5s                    # å®šæ—¶å™¨é—´éš”
  max_concurrent_orders: 10             # æœ€å¤§å¹¶å‘è®¢å•æ•°

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Portfolio Management Configuration (ç»„åˆç®¡ç†é…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
portfolio:
  total_capital: 1000000.0              # æ€»èµ„é‡‘
  strategy_allocation:                  # ç­–ç•¥èµ„é‡‘åˆ†é…
    "test_92201": 0.3                   # 30% åˆ†é…ç»™ç™½é“¶ç­–ç•¥
    "test_92202": 0.4                   # 40% åˆ†é…ç»™é»„é‡‘ç­–ç•¥
    "test_92203": 0.3                   # 30% åˆ†é…ç»™ç™½é“¶è¿‘æœˆç­–ç•¥
  rebalance_interval_sec: 3600          # å†å¹³è¡¡é—´éš”ï¼ˆç§’ï¼‰
  min_allocation: 0.05                  # æœ€å°åˆ†é…æ¯”ä¾‹
  max_allocation: 0.50                  # æœ€å¤§åˆ†é…æ¯”ä¾‹
  enable_auto_rebalance: false          # å¯ç”¨è‡ªåŠ¨å†å¹³è¡¡
  enable_correlation_calc: false        # å¯ç”¨ç›¸å…³æ€§è®¡ç®—

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# API Configuration (APIé…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
api:
  enabled: true                         # å¯ç”¨ HTTP REST API
  port: 9201                            # API ç«¯å£
  host: "localhost"                     # API ç»‘å®šåœ°å€

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Logging Configuration (æ—¥å¿—é…ç½®)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
logging:
  level: "info"                         # æ—¥å¿—çº§åˆ«: debug, info, warn, error
  file: "./log/trader.test.log"         # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆæµ‹è¯•ä¸“ç”¨ï¼‰
  max_size_mb: 100                      # æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰
  max_backups: 10                       # ä¿ç•™çš„æ—§æ—¥å¿—æ–‡ä»¶æ•°é‡
  max_age_days: 30                      # æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°
  compress: true                        # å‹ç¼©æ—§æ—¥å¿—æ–‡ä»¶
  console: true                         # åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°
  json_format: false                    # ä½¿ç”¨ JSON æ ¼å¼
