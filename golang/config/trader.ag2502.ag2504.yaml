# QuantlinkTrader Configuration - ag2502-ag2504 Pair Trading
# 对应 tbsrc: control.ag2502.ag2504.par.txt.92201
# 白银 2025年2月 - 2025年4月 配对套利

system:
  strategy_id: "92201"
  mode: "live"                          # live, backtest, simulation

strategy:
  type: "pairwise_arb"                  # 配对套利策略
  symbols:
    - "ag2502"                          # 白银 2025年2月（主品种）
    - "ag2504"                          # 白银 2025年4月（对冲品种）
  exchanges:
    - "SHFE"
    - "SHFE"
  max_position_size: 16                 # 对应 tbsrc controlFile 中的 16
  max_exposure: 500000.0

  parameters:
    # === C++ 策略标识（用于 daily_init 文件） ===
    # C++: m_strategyID，决定 daily_init 文件名
    # 例如 strategy_id: 92201 对应 data/daily_init.92201
    strategy_id: 92201

    # Pairwise Arbitrage Parameters
    lookback_period: 100
    entry_zscore: 2.0                   # 对应 tbsrc BEGIN_PLACE
    exit_zscore: 0.5
    order_size: 4                       # 对应 tbsrc SIZE
    min_correlation: 0.7
    spread_type: "difference"           # difference or ratio
    use_cointegration: false
    trade_interval_ms: 3000

session:
  start_time: "09:00:00"                # 对应 tbsrc 0100 (UTC+8 09:00)
  end_time: "15:00:00"                  # 对应 tbsrc 0700 (UTC+8 15:00)
  timezone: "Asia/Shanghai"
  auto_start: false                      # 测试模式：禁用自动启动
  auto_stop: false                       # 测试模式：禁用自动停止

risk:
  max_drawdown: 10000.0
  stop_loss: 100000.0                   # 对应 tbsrc STOP_LOSS
  max_loss: 100000.0                    # 对应 tbsrc MAX_LOSS
  daily_loss_limit: 200000.0
  max_reject_count: 10
  check_interval_ms: 100

engine:
  ors_gateway_addr: "localhost:50052"
  nats_addr: "nats://localhost:4222"
  order_queue_size: 100
  timer_interval: 5s
  max_concurrent_orders: 10

portfolio:
  total_capital: 500000.0
  strategy_allocation:
    "92201": 1.0
  rebalance_interval_sec: 3600
  min_allocation: 0.0
  max_allocation: 1.0
  enable_auto_rebalance: false
  enable_correlation_calc: false

api:
  enabled: true                             # 启用 HTTP REST API
  port: 9201                                # API 端口（策略ID前缀 + 01）
  host: "localhost"                         # API 绑定地址

logging:
  level: "info"
  file: "./log/trader.ag2502.ag2504.92201.log"
  max_size_mb: 100
  max_backups: 10
  max_age_days: 30
  compress: true
  console: true
  json_format: false
